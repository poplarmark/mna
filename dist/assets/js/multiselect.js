<script>
var select=document.querySelector("select[multiple]"),selectOptions=select.querySelectorAll("option"),newSelect=document.createElement("div");newSelect.classList.add("selectMultiple");var active=document.createElement("div");active.classList.add("active");var optionList=document.createElement("ul"),placeholder=select.dataset.placeholder,span=document.createElement("span");span.innerText=placeholder,active.appendChild(span),selectOptions.forEach(e=>{let t=e.innerText;if(e.selected){let l=document.createElement("a");l.dataset.value=e.value,l.innerHTML="<em>"+t+"</em><i></i>",active.appendChild(l),span.classList.add("hide")}else{let a=document.createElement("li");a.dataset.value=e.value,a.innerHTML=t,optionList.appendChild(a)}});var arrow=document.createElement("div");arrow.classList.add("arrow"),active.appendChild(arrow),newSelect.appendChild(active),newSelect.appendChild(optionList),select.parentElement.append(newSelect),span.appendChild(select),document.querySelector(".selectMultiple ul").addEventListener("click",e=>{let t=e.target.closest("li");if(!t)return;let l=t.closest(".selectMultiple");if(!l.classList.contains("clicked")){l.classList.add("clicked"),t.previousElementSibling&&t.previousElementSibling.classList.add("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.add("afterRemove"),t.classList.add("remove");let a=document.createElement("a");a.dataset.value=t.dataset.value,a.innerHTML="<em>"+t.innerText+"</em><i></i>",a.classList.add("notShown"),l.querySelector("div").appendChild(a);l.querySelector("select").querySelector('option[value="'+t.dataset.value+'"]').setAttribute("selected","selected"),setTimeout(()=>{a.classList.add("shown"),l.querySelector("span").classList.add("hide")},300),setTimeout(()=>{let e=window.getComputedStyle(t),a=e.height,i=e.padding;t.animate([{height:a,padding:i},{height:"0px",padding:"0px"}],{duration:300,easing:"ease-in-out"}).onfinish=()=>{t.previousElementSibling&&t.previousElementSibling.classList.remove("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.remove("afterRemove"),t.remove(),l.classList.remove("clicked")}},300)}}),document.querySelector(".selectMultiple > div").addEventListener("click",e=>{let t=e.target.closest("a"),l=e.target.closest(".selectMultiple");if(!t)return;t.className="",t.classList.add("remove"),l.classList.add("open");let a=l.querySelector("select");a.querySelector('option[value="'+t.dataset.value+'"]').removeAttribute("selected"),t.classList.add("disappear"),setTimeout(()=>{let e=window.getComputedStyle(t),i=e.padding,s=e.width,n=e.height,d=t.animate([{width:s,height:n,padding:i},{width:"0px",height:"0px",padding:"0px"}],{duration:0,easing:"ease-in-out"}),c=document.createElement("li");c.dataset.value=t.dataset.value,c.innerText=t.querySelector("em").innerText,c.classList.add("show"),l.querySelector("ul").appendChild(c),setTimeout(()=>{a.selectedOptions.length||l.querySelector("span").classList.remove("hide"),c.className=""},350),d.onfinish=()=>{t.remove()}},300)}),document.querySelectorAll(".selectMultiple > div .arrow, .selectMultiple > div span").forEach(e=>{e.addEventListener("click",t=>{e.closest(".selectMultiple").classList.toggle("open")})});
</script>